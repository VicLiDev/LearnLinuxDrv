CMAKE_MINIMUM_REQUIRED(VERSION 3.5)

PROJECT(mDemoPrj)

SET (Demo_VERSION_MAJOR 3)
SET (Demo_VERSION_MINOR 6)

INCLUDE(${CMAKE_SOURCE_DIR}/build.cmake)

# KERNEL_DIR
EXECUTE_PROCESS(COMMAND uname -r
    WORKING_DIRECTORY ${CMAKE_SOURCE_DIR}
    OUTPUT_VARIABLE  KERNEL_DIR
    OUTPUT_STRIP_TRAILING_WHITESPACE
)
SET(KERNEL_DIR "/lib/modules/${KERNEL_DIR}/build")
MESSAGE(STATUS "KERNEL_DIR: ${KERNEL_DIR}")

ADD_KBUILD(m_kDemo SRC kDemo.c)
